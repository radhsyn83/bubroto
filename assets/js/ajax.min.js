"use strict";App.loadPlugins=(e,t,r)=>{let a=[];for(const e of document.head.querySelectorAll("script"))a.push(e.getAttribute("src"));let n=[];for(const e of document.head.querySelectorAll("link"))n.push(e.getAttribute("href"));let i=[];if(!r){if(t)for(const e of t)i.push(l(e,!0));if(e)for(const t of e)"css"===t.substring(t.lastIndexOf(".")+1)?i.push(o(t)):i.push(l(t));!e&&!t&&i.push(Promise.resolve())}function o(e){return new Promise((t,r)=>{if(-1===n.indexOf(e)){let a=document.createElement("link");a.href=e,a.rel="stylesheet",a.onload=()=>t(),a.onerror=()=>r(new Error("Style load error: "+e)),document.getElementById("main-css").before(a)}else t()})}function l(e,t=!1){return new Promise((r,n)=>{if(-1===a.indexOf(e)||t){let a=document.createElement("script");a.src=t?App.addTimestamp(e):e,a.onload=()=>r(),a.onerror=()=>n(new Error("Script load error: "+e)),t?document.head.appendChild(a).parentNode.removeChild(a):document.head.appendChild(a)}else r()})}return r?async function(){if(t)for(const e of t)await l(e,!0);if(e)for(let t of e)"css"===t.substring(t.lastIndexOf(".")+1)?await o(t):await l(t);!e&&!t&&await Promise.resolve()}():Promise.all(i)},App.startLoading=()=>{ajaxloader.classList.add("loading"),setTimeout(()=>{ajaxloader.classList.contains("loading")&&(ajaxloader.style.display="",setTimeout(()=>ajaxloader.classList.add("show"),10))},500)},App.stopLoading=()=>{ajaxloader.style.display="none",ajaxloader.classList.remove("loading","show")},App.cleanScraps=()=>{let e=document.getElementById("ajax-js"),t=[];for(;e=e.nextElementSibling;)"script"!=e.tagName.toLowerCase()&&t.push(e);for(const e of t)e.parentNode.removeChild(e)},App.contentEval=e=>{const t=document.createElement("div");t.innerHTML=e;for(let e of t.querySelectorAll("script")){let t=r("script",e);document.head.appendChild(t).parentNode.removeChild(t)}function r(e,t){const r=document.createElement(e);t.text&&(r.text=t.text);const a=t.attributes;if(a.length)for(let e of a)r.setAttribute(e.nodeName,e.nodeValue);return r}return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")},App.addTimestamp=e=>{if(-1!==e.indexOf("_="))return e;{const t=-1!==e.indexOf("?")?"&":"?";return e+t+"_="+Date.now()}},App.loadURL=(e,t,r)=>{const a=document.querySelector(r.container);App.startLoading(),fetch(App.addTimestamp(e)).then(e=>{e.text().then(n=>{if(document.querySelector(".main-body").scrollTo(0,0),e.ok){if(App.cleanScraps(),r.breadcrumb){let e=App.generateBreadcrumb(t,r);e&&(n=e+n)}a.innerHTML=App.contentEval(n)}else App.stopLoading(),a.innerHTML='<div class="alert alert-danger alert-error-load" role="alert">'+n+"</div>"})})},App.updateMenu=e=>{const t=document.querySelector("#menu");for(const r of t.querySelectorAll(".active, .show"))e!=r&&r.classList.remove("active","show");e.classList.add("active"),e.classList.contains("nav-link")||e.closest(".nav-item").querySelector(".nav-link").classList.add("active","show"),App.mdDown()&&document.body.classList.contains("sidebar-expand")&&document.querySelector('[data-toggle="sidebar"]').click()},App.updateBreadcrumb=e=>{const t=document.getElementById("main-breadcrumb");if("false"===e.dataset.breadcrumb)t.setAttribute("hidden",!0);else{t.removeAttribute("hidden");const r=t.querySelector(".breadcrumb");let a=r.querySelectorAll("li:not(:first-child)");if(a.length)for(let e of a)e.parentNode.removeChild(e);if(!e.classList.contains("nav-link")){const t=e.closest("ul").previousElementSibling.innerHTML.replace(/<i.*>.*?<\/i>/gi,"").trim();r.querySelector("li:first-child").insertAdjacentHTML("afterend",'\n<li class="breadcrumb-item"><a href="javascript:void(0)">'+t+"</a></li>")}r.insertAdjacentHTML("beforeend",'<li class="breadcrumb-item active" aria-current="page">'+e.innerHTML.replace(/<i.*>.*?<\/i>/gi,"").trim()+"</a></li>")}},App.generateBreadcrumb=(e,t)=>{if("false"!==e.dataset.breadcrumb){let r=[`<li class="breadcrumb-item"><a href="#${t.default}">Home</a></li>`];if(!e.classList.contains("nav-link")){const t=e.closest("ul").previousElementSibling.innerHTML.replace(/<i.*>.*?<\/i>/gi,"").trim();r.push(`<li class="breadcrumb-item"><a href="javascript:void(0)">${t}</a></li>`)}return r.push(`<li class="breadcrumb-item active" aria-current="page">${e.innerHTML.replace(/<i.*>.*?<\/i>/gi,"").trim()}</a></li>`),`\n      <nav aria-label="breadcrumb" class="main-breadcrumb">\n        <ol class="breadcrumb breadcrumb-style2">\n          ${r.join("\n")}\n        </ol>\n      </nav>`}},App.ajax=e=>{const t=location.href.split("#").splice(1).join("#");if(t){const r=menu.querySelector('a[href="#'+t.split("?")[0].split("/")[0]+'"]');App.loadURL(t+window.location.search,r,e),r&&App.updateMenu(r),document.title=r?r.innerHTML.replace(/<i.*>.*?<\/i>/gi,"").trim():document.title,document.dispatchEvent(new Event("sidebar:update"))}else window.location.hash=menu.querySelector('a[href="#'+e.default+'"]').getAttribute("href");window.onhashchange=()=>App.ajax(e),App.ajaxReload=()=>{App.ajax(e)},document.querySelector("#refreshPage")&&(refreshPage.onclick=e=>{App.ajaxReload(),e.preventDefault()})};